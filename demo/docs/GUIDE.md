# 自动驾驶决策规划演示系统 - 快速使用指南

## 🚀 启动系统

### 一键启动（推荐）
```bash
cd demo
./start.sh
```

### 手动启动
```bash
# 1. 安装依赖
cd demo/backend
pip install -r requirements.txt

# 2. 安装python_motion_planning
cd ../../python_motion_planning
pip install -e .

# 3. 启动服务器
cd ../demo/backend
python main.py
```

然后在浏览器中访问：**http://localhost:8000**

## 🎮 快速体验

### 第一步：设置起点和终点
1. 在左侧控制面板，点击"起点"按钮（🟢）
2. 在画布上点击设置起点
3. 点击"终点"按钮（🔴）
4. 在画布上点击设置终点

### 第二步：添加障碍物（可选）
1. 点击"障碍物"按钮（🧱）
2. 在画布上点击或拖拽绘制障碍物
3. 或者从"预设场景"下拉菜单选择一个场景

### 第三步：选择算法并规划
1. 在"算法选择"下拉菜单中选择一个算法（如A*）
2. 点击"开始规划"按钮
3. 查看可视化结果和性能统计

### 第四步：对比算法
1. 选择另一个算法
2. 再次点击"开始规划"
3. 在右侧面板查看多个算法的对比结果

## 🎯 功能详解

### 地图编辑模式
- **障碍物模式（🧱）**：点击添加障碍物，拖拽可连续绘制
- **起点模式（🟢）**：点击设置起点位置
- **终点模式（🔴）**：点击设置终点位置
- **擦除模式（🗑️）**：点击删除障碍物

### 预设场景
系统提供了4个预设场景：
- **简单迷宫**：基础迷宫场景，适合测试图搜索算法
- **停车场场景**：模拟停车场环境
- **城市道路**：模拟城市道路环境
- **窄通道挑战**：具有窄通道的复杂场景

### 算法选择
系统支持10种路径规划算法：

**图搜索算法**（适合静态环境）
- A*：平衡性能和最优性
- Dijkstra：保证最优但速度较慢
- GBFS：速度快但不保证最优
- JPS：A*的优化版本
- Theta*：生成平滑路径
- Lazy Theta*：Theta*的优化版本

**采样算法**（适合高维和复杂环境）
- RRT：快速探索
- RRT*：渐近最优
- RRT-Connect：双向搜索

**混合算法**
- Voronoi：安全性优先

### 显示选项
- **网格线**：显示/隐藏网格
- **搜索节点**：显示/隐藏算法扩展的节点
- **规划路径**：显示/隐藏最终路径

### 性能统计
右侧面板实时显示：
- **计算时间**：算法执行耗时（毫秒）
- **路径长度**：规划路径的总长度
- **搜索节点数**：算法扩展的节点数量
- **状态**：当前系统状态

## 💡 使用技巧

### 1. 对比不同算法
在相同地图上运行多个算法，对比它们的：
- 计算速度
- 路径质量
- 搜索效率

### 2. 测试极端情况
尝试创建以下场景测试算法鲁棒性：
- 窄通道
- 迷宫结构
- 大量障碍物
- 无解情况

### 3. 了解算法特点
点击算法后，查看右侧的"算法信息"面板，了解：
- 算法原理
- 时间复杂度
- 优缺点
- 适用场景

### 4. 调整地图尺寸
- 小地图（20×20）：适合快速测试
- 中地图（50×50）：默认大小
- 大地图（80×80）：测试算法可扩展性

## 🎨 界面说明

```
┌─────────────────────────────────────────────────┐
│ 🚗 自动驾驶决策规划演示      [关于]              │
├──────────┬──────────────────────┬───────────────┤
│ 左侧面板  │     中间画布区域      │   右侧面板    │
│          │                      │               │
│ 场景设置  │   - 地图网格         │  性能统计     │
│ 编辑模式  │   - 障碍物           │  - 时间       │
│ 算法选择  │   - 起点/终点        │  - 长度       │
│ 播放控制  │   - 搜索节点         │  - 节点数     │
│ 显示选项  │   - 规划路径         │               │
│          │                      │  算法对比     │
│          │                      │  算法信息     │
└──────────┴──────────────────────┴───────────────┘
```

## 🐛 常见问题

### Q: 点击"开始规划"没有反应？
A: 请确保已经设置了起点和终点。

### Q: 规划失败，提示"未找到路径"？
A: 检查起点和终点之间是否有可达路径，障碍物是否完全阻挡。

### Q: 如何清除所有内容重新开始？
A: 点击"重置地图"按钮清除所有内容。

### Q: 如何保存当前地图？
A: 当前版本暂不支持地图保存，但可以使用预设场景。

### Q: 算法执行太慢怎么办？
A: 
- 减小地图尺寸
- 选择更快的算法（如GBFS、JPS）
- 减少障碍物数量

### Q: 如何退出系统？
A: 在终端中按 Ctrl+C 停止服务器。

## 📚 进阶使用

### 创建自定义场景
在 `demo/scenarios/` 目录下创建JSON文件：

```json
{
    "name": "我的场景",
    "description": "场景描述",
    "map": {
        "width": 50,
        "height": 50,
        "obstacles": [[x1, y1], [x2, y2], ...],
        "start": [x, y],
        "goal": [x, y]
    }
}
```

重启服务器后，新场景会出现在预设场景列表中。

### 修改配置
编辑 `frontend/js/config.js` 可以修改：
- 画布大小
- 网格大小
- 颜色方案
- 动画速度
- API地址

### API使用
系统提供REST API，可以通过编程方式调用：

```bash
# 获取算法列表
curl http://localhost:8000/api/algorithms

# 规划路径
curl -X POST http://localhost:8000/api/plan \
  -H "Content-Type: application/json" \
  -d '{
    "map_config": {
      "width": 50,
      "height": 50,
      "obstacles": [[10,10], [10,11]],
      "start": [5, 5],
      "goal": [45, 45]
    },
    "algorithm": "astar"
  }'
```

## 🎓 学习建议

1. **从简单开始**：先使用简单迷宫场景了解系统
2. **对比学习**：运行多个算法对比差异
3. **理解原理**：查看算法信息了解工作原理
4. **动手实践**：创建各种场景测试算法特性
5. **深入探索**：查看源代码了解实现细节

## 🤝 反馈与支持

遇到问题或有建议？
- 查看 `demo/README.md` 获取详细文档
- 检查终端的错误信息
- 查看浏览器控制台的日志

---

**祝你使用愉快！🚗💨**
