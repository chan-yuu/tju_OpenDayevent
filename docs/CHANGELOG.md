# 更新日志

## 2026-01-27 v3.0 - 答题系统 + 学习文档

### 🎓 新增功能

**1. AI知识学习手册**
- ✅ 创建完整的学习文档（AI_LEARNING_GUIDE.md）
- ✅ 10章节系统化内容
- ✅ 涵盖AI基础、计算机视觉、YOLO算法等
- ✅ 面向中小学生，通俗易懂
- ✅ 包含实践项目和常见问题

**2. 互动答题系统**
- ✅ 20道精选选择题
- ✅ 三种难度：简单(10分)、中等(20分)、困难(30分)
- ✅ 实时排行榜系统
- ✅ 输入用户名参与竞赛
- ✅ 即时答案反馈和详细解释
- ✅ 成绩记录和评级
- ✅ 计时功能
- ✅ 炫酷的UI动画

**3. 题库分类**
- 基础概念（5题）
- 物体检测（5题）
- 机器学习（5题）
- YOLO算法（3题）
- 实践应用（5题）

### 📁 新增文件
- `AI_LEARNING_GUIDE.md` - 完整学习手册
- `QUIZ_SYSTEM.md` - 答题系统使用说明
- `QuizSystem.tsx` - 答题系统组件
- `quizData.ts` - 题库数据

### 🎨 界面更新
- 侧边栏新增"答题"按钮
- 独立的答题界面布局
- 三个页面：开始页、答题页、结果页
- 排行榜实时更新显示

### 🗑️ 文件清理
- 删除 `App_backup.tsx`
- 删除 `App_simple.tsx`
- 删除 `App_new.tsx`
- 删除 `test_scripts.sh`

---

## 2026-01-27 v2.1 - 完整功能版 + 快速启动

### 🎯 新增功能

**1. 桌面快捷方式**
- ✅ 双击桌面图标即可启动
- ✅ 自动启动后端和前端服务
- ✅ 自动打开浏览器
- ✅ 日志文件记录运行状态

**2. 启动脚本**
- `start.sh` - 一键启动所有服务
- `stop.sh` - 一键停止所有服务
- 自动检测服务状态
- 后台运行，服务持久化

**3. 完整功能恢复**
- ✅ 保留标注、训练、识别三大功能
- ✅ 全新科技感界面设计
- ✅ 侧边栏导航，清晰直观
- ✅ 模型选择器，支持切换模型

### 📁 新增文件
- `start.sh` - 启动脚本
- `stop.sh` - 停止脚本
- `AI-Vision-Lab.desktop` - 桌面快捷方式
- `icon.svg` / `icon.png` - 应用图标
- `USAGE_GUIDE.md` - 详细使用指南
- `logs/` - 日志目录

### 🎨 界面优化
- 侧边栏导航：标注（蓝）/ 训练（紫）/ 识别（绿）
- 保持科技感设计：渐变背景、粒子效果、动画
- 优化布局：更紧凑、更专业
- 状态指示：AI引擎运行状态实时显示

---

## 2026-01-27 v2.0 - 重大更新

### 🎯 问题1：修复预训练模型干扰问题

#### 问题描述
使用 YOLOv8 预训练模型（yolov8n.pt）时，模型会检测到 COCO 数据集的 80 个类别，导致识别了训练之外的内容。

#### 解决方案

**1. 训练时不使用预训练权重**
- 修改了 `backend/main.py` 中的 `train_in_background` 函数
- 从 `YOLO("yolov8n.pt")` 改为 `YOLO("yolov8n.yaml")`
- 只使用模型架构，不加载预训练权重
- 添加参数 `pretrained=False` 确保从零开始训练

**2. 推理时过滤非训练类别**
- 修改了 `backend/main.py` 中的 `detect` 函数
- 自动读取 `dataset/data.yaml` 中定义的类别
- 只返回训练数据集中存在的类别
- 过滤掉预训练模型可能检测到的其他类别

#### 技术细节
```python
# 训练时使用架构而非预训练权重
train_model = YOLO("yolov8n.yaml")  # 只加载架构
train_model.train(
    data=temp_yaml,
    epochs=epochs,
    pretrained=False  # 不使用预训练权重
)

# 推理时过滤类别
if valid_classes is not None and label not in valid_classes:
    continue  # 跳过不在训练集中的类别
```

---

### 🎨 问题2：全新的科技感教学界面

#### 设计目标
- 面向中小学生
- 高大上的科技感
- 隐藏技术细节
- 适合教学演示

#### 主要改进

**1. 视觉设计**
- ✨ 渐变背景：紫色、蓝色、粉色动态渐变
- 🌟 粒子效果：3个动态光晕粒子背景
- 🎭 毛玻璃效果：所有卡片使用 backdrop-blur
- 🌈 霓虹效果：按钮和边框使用发光阴影
- 💫 动画效果：扫描线、脉冲、渐变滑动

**2. 界面简化**
- 移除了标注和训练模式（保留在代码备份中）
- 只保留推理/识别功能
- 更大的按钮和文字
- 更直观的操作流程
- 隐藏了技术参数

**3. 交互优化**
- 大号按钮：易于点击
- 清晰的状态指示：AI引擎运行状态
- 实时反馈：扫描动画、加载动画
- 友好的提示文字

**4. 新增视觉元素**
- 🔍 扫描线动画：识别时显示蓝色扫描线
- 🎯 检测结果卡片：渐变背景、圆角、发光效果
- 📊 置信度标签：彩色百分比标签
- 🌟 图标动画：脉冲、旋转效果
- 🎨 彩色边框：识别框使用渐变色

**5. 文案优化**
- "目标检测推理" → "AI 智能识别系统"
- "运行检测" → "开始识别"
- "检测到 X 个目标" → "发现目标：X 个物体"
- 添加了更多科技感标语

#### 颜色方案
- 主色调：紫色、蓝色
- 强调色：黄色、橙色、粉色
- 成功色：绿色、翠绿
- 警告色：红色、粉红

#### 技术实现
- Tailwind CSS：渐变、动画、响应式
- CSS 关键帧：自定义扫描动画
- SVG 渐变：识别框渐变边框
- Lucide Icons：更多图标选择

---

### 📁 文件变更

#### 修改的文件
1. `backend/main.py` - 修复预训练模型问题
2. `App.tsx` - 全新科技感界面

#### 备份文件
- `App_backup.tsx` - 原始界面备份（包含标注和训练功能）

---

### 🚀 如何使用

#### 启动应用
```bash
# 后端
cd backend
python run.py

# 前端
npm run dev
```

#### 使用流程
1. 等待"AI引擎运行中"显示为绿色
2. 选择图片或启动相机
3. 点击"开始识别"或"拍照识别"
4. 查看识别结果

---

### 💡 教学建议

**适合演示场景**
- 中小学AI课程
- 科技展览
- 编程教学
- 计算机视觉入门

**演示要点**
1. 强调AI能"看懂"图片
2. 展示置信度概念（百分比）
3. 实时相机演示更有趣
4. 可以用不同物体测试

**可能的教学话题**
- 什么是计算机视觉？
- AI是如何识别物体的？
- 为什么有时识别不准确？
- AI需要学习哪些东西？

---

### 🔧 高级功能（管理员）

如需使用标注和训练功能，可以恢复原始界面：
```bash
cp App_backup.tsx App.tsx
```

或者修改 `App.tsx`，将 `type AppMode = 'INFERENCE'` 改为 `type AppMode = 'ANNOTATE' | 'TRAIN' | 'INFERENCE'` 并恢复相关代码。

---

### 📝 注意事项

1. **首次训练**：建议使用至少 50 轮训练获得更好效果
2. **数据集**：确保 `dataset/data.yaml` 中正确定义了类别
3. **模型选择**：训练后会自动使用新模型
4. **相机权限**：需要浏览器相机权限

---

### 🎉 效果对比

**优化前**
- ❌ 识别出训练之外的物体（COCO 80类）
- ❌ 界面显示大量技术信息
- ❌ 不适合教学演示
- ❌ 操作复杂

**优化后**
- ✅ 只识别训练的类别
- ✅ 简洁直观的科技界面
- ✅ 完美的教学演示工具
- ✅ 操作简单易懂
- ✅ 炫酷的视觉效果
