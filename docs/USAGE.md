# 快速使用指南

## 一键启动

### Linux/Mac 用户
```bash
./start.sh
```

### Windows 用户
双击运行 `start.bat` 或在命令提示符中运行：
```cmd
start.bat
```

## 手动启动

如果自动启动脚本不工作，可以手动启动：

### 1. 启动后端
```bash
cd backend
python app.py
```

### 2. 启动前端（新开一个终端）
```bash
cd frontend  
python -m http.server 8080
```

### 3. 打开浏览器
访问: http://localhost:8080/map-editor.html

## 停止服务

### Linux/Mac 用户
```bash
./stop.sh
```

### 手动停止
按 `Ctrl+C` 停止运行中的服务

## 使用教程

### 第一步：准备背景地图
1. 准备一张校园地图图片（PNG/JPG格式）
2. 或使用 frontend 目录下的示例 map.png

### 第二步：创建地图
1. 打开浏览器访问地图编辑器
2. 输入地图名称（如"天津大学卫津路校区"）
3. 点击"选择地图图片"上传背景图

### 第三步：创建节点
1. 在左侧工具栏选择"创建节点"模式
2. 输入节点名称（如"东门"）
3. 选择节点类型（如"大门"）
4. 在地图上点击位置创建节点
5. 重复以上步骤创建所有需要的节点

### 第四步：创建道路（边）
1. 在左侧工具栏选择"创建边"模式
2. 点击起始节点
3. 点击地图空白处添加折点（用于创建弯曲道路，可选）
4. 最后点击目标节点完成创建
5. 系统会自动显示道路长度

### 第五步：保存地图
1. 确认地图名称已填写
2. 点击"💾 保存地图"按钮
3. 系统会提示保存成功

## 操作技巧

### 节点创建
- 节点名称建议使用有意义的中文名称
- 选择正确的节点类型便于后续调度算法识别
- 节点位置可以精确控制，鼠标悬停可查看坐标

### 边创建
- **直线道路**：起点节点 → 终点节点
- **弯曲道路**：起点节点 → 折点1 → 折点2 → ... → 终点节点
- 折点越多，道路越精确，但也会增加复杂度
- 道路长度自动计算，单位为像素

### 删除操作
1. 选择"删除"模式
2. 点击要删除的节点或边
3. 删除节点会同时删除所有相关的边

### 查看模式
- 选择"查看"模式可以查看地图而不误操作
- 鼠标悬停节点可查看节点信息

## 数据存储

- 所有地图数据保存在 `backend/data/maps/` 目录
- 上传的图片保存在 `backend/data/uploads/` 目录
- 数据格式为JSON，便于后续处理和分析

## 常见问题

### Q: 无法连接到后端服务
**A**: 
1. 确认后端服务是否正常启动（检查终端输出）
2. 确认端口5000没有被占用
3. 尝试访问 http://localhost:5000/api/node-types 测试

### Q: 前端页面打不开
**A**:
1. 确认前端服务是否正常启动
2. 确认端口8080没有被占用
3. 尝试直接用浏览器打开 frontend/map-editor.html

### Q: 保存地图失败
**A**:
1. 确认地图名称已填写
2. 确认至少创建了一个节点
3. 检查后端服务是否正常运行
4. 查看浏览器控制台的错误信息

### Q: 上传的图片不显示
**A**:
1. 确认图片格式为 PNG/JPG
2. 确认图片文件大小合理（建议小于10MB）
3. 尝试刷新页面重新上传

## 下一步开发

完成地图创建后，可以继续开发：
1. 调度算法实现（Dijkstra、A*等）
2. 车辆模拟动画
3. 实时调度可视化
4. 多车辆协同调度

详见主 README.md 文件的开发计划部分。
