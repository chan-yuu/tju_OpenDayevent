# AI Vision Lab 使用指南

## 🚀 快速启动

### 方法1：桌面快捷方式（推荐）
1. 双击桌面上的 **AI-Vision-Lab** 图标
2. 等待终端窗口显示 "AI Vision Lab 启动完成"
3. 浏览器会自动打开应用界面

### 方法2：命令行启动
```bash
cd /home/cyun/Documents/tju-vision-lab
./start.sh
```

### 停止服务
```bash
cd /home/cyun/Documents/tju-vision-lab
./stop.sh
```

---

## 📋 功能说明

### 1. 数据标注模式 📊
**用途**：标记图片中的物体，构建训练数据集

**步骤**：
1. 将图片放入 `dataset/images/` 目录
2. 点击 "启动标注工具" 按钮
3. 在 LabelImg 中框选物体并选择类别
4. 保存后标注文件自动生成在 `dataset/labels/`

**提示**：
- 确保选择 YOLO 格式保存
- 标注越准确，训练效果越好
- 建议至少准备 50-100 张图片

---

### 2. 模型训练模式 🧠
**用途**：使用标注数据训练AI模型

**步骤**：
1. 确保已完成数据标注
2. 设置训练轮数（建议 50-100）
3. 点击 "开始训练" 按钮
4. 等待训练完成

**配置参数**：
- **训练轮数**：10-20轮用于测试，50-100轮用于生产
- **图像大小**：640×640（固定）
- **批次大小**：16（固定）
- **模型架构**：YOLOv8n

**注意事项**：
- 训练时间取决于数据量和轮数
- 训练期间可以查看实时进度
- 训练完成后自动保存模型
- 新模型会自动添加到可用模型列表

---

### 3. 智能识别模式 🔍
**用途**：使用训练好的模型识别图片中的物体

**步骤**：
1. 在顶部选择要使用的模型
2. 选择图片或启动相机
3. 点击 "开始识别" 或 "拍照识别"
4. 查看识别结果

**功能特点**：
- 支持图片上传
- 支持实时相机识别
- 显示识别框和置信度
- 可切换不同训练的模型

**模型选择**：
- **预训练模型**：可识别常见物体（人、车、猫、狗等）
- **自定义模型**：只识别你训练的类别

---

## 🎨 界面说明

### 侧边栏导航
- **标注**（蓝色）：数据标注模式
- **训练**（紫色）：模型训练模式
- **识别**（绿色）：智能识别模式

### 状态指示
- **绿色闪烁**：AI引擎运行中
- **红色**：AI引擎离线

---

## 📁 目录结构

```
tju-vision-lab/
├── dataset/              # 数据集目录
│   ├── images/          # 训练图片
│   ├── labels/          # 标注文件
│   └── data.yaml        # 数据集配置
├── backend/             # 后端服务
│   ├── main.py         # API 服务
│   └── run.py          # 启动脚本
├── logs/                # 日志文件
│   ├── backend.log     # 后端日志
│   └── frontend.log    # 前端日志
├── start.sh            # 启动脚本
├── stop.sh             # 停止脚本
└── icon.png            # 应用图标
```

---

## ⚙️ 配置文件

### dataset/data.yaml
定义训练数据集的类别和路径：

```yaml
path: ../dataset
train: images
val: images

names:
  - person      # 类别 0
  - car         # 类别 1
  - dog         # 类别 2
  - cat         # 类别 3
  # 添加更多类别...
```

**修改类别**：
1. 编辑 `dataset/data.yaml`
2. 在 `names` 下添加或修改类别
3. 保存后重新训练

---

## 🔧 故障排除

### 问题1：后端启动失败
**检查**：
```bash
cat logs/backend.log
```

**可能原因**：
- Python 依赖未安装：`pip install -r backend/requirements.txt`
- 端口 8000 被占用：`lsof -i :8000`

### 问题2：前端启动失败
**检查**：
```bash
cat logs/frontend.log
```

**可能原因**：
- Node 依赖未安装：`npm install`
- 端口 5173 被占用：`lsof -i :5173`

### 问题3：无法访问相机
**解决**：
- 检查浏览器权限设置
- 确保相机未被其他应用占用
- 使用 HTTPS 或 localhost

### 问题4：训练失败
**检查**：
- 数据集是否正确标注
- `dataset/data.yaml` 配置是否正确
- 图片和标注文件数量是否一致

### 问题5：识别不准确
**优化**：
- 增加训练数据（更多图片）
- 增加训练轮数（50-100轮）
- 提高标注质量（更准确的框选）
- 数据多样化（不同角度、光照）

---

## 💡 使用技巧

### 数据标注技巧
1. 框选要完整包含物体
2. 尽量贴合物体边缘
3. 避免过大或过小的框
4. 保持标注一致性

### 训练技巧
1. 先用少量数据测试（10轮）
2. 确认流程正确后增加数据
3. 生产环境使用 50-100 轮
4. 定期验证模型效果

### 识别技巧
1. 使用清晰、光照良好的图片
2. 物体不要太小或太远
3. 避免遮挡和重叠
4. 尝试不同角度拍摄

---

## 📊 性能优化

### 加速训练
- 使用 GPU（需要 CUDA 支持）
- 减小批次大小（如果内存不足）
- 使用更小的图像尺寸

### 提高准确度
- 增加训练数据量
- 提高标注质量
- 增加训练轮数
- 数据增强（旋转、翻转等）

---

## 🎓 教学建议

### 适合场景
- 中小学 AI 课程
- 计算机视觉入门
- 机器学习实践
- 科技展览演示

### 教学要点
1. **什么是计算机视觉**：让计算机"看懂"图片
2. **AI如何学习**：通过标注数据训练
3. **识别过程**：模型分析图片特征
4. **置信度含义**：AI对结果的确信程度

### 演示流程
1. 展示标注过程（如何教AI）
2. 启动训练（AI学习过程）
3. 实时识别演示（AI应用）
4. 讨论结果和改进

---

## 📞 技术支持

### 日志查看
```bash
# 查看后端日志
tail -f logs/backend.log

# 查看前端日志
tail -f logs/frontend.log
```

### 重启服务
```bash
./stop.sh
./start.sh
```

### 完全清理
```bash
# 停止所有服务
./stop.sh

# 清理日志
rm -rf logs/*

# 清理 PID 文件
rm -f .*.pid
```

---

## 📝 更新日志

### v2.0 (2026-01-27)
- ✅ 修复预训练模型干扰问题
- ✅ 全新科技感界面
- ✅ 添加桌面快捷方式
- ✅ 自动启动脚本
- ✅ 完整的三模式支持

### 主要改进
1. 训练时不使用预训练权重，避免识别训练外类别
2. 推理时自动过滤非训练类别
3. 炫酷的渐变背景和动画效果
4. 一键启动，自动打开浏览器
5. 简化操作流程，更适合教学

---

## 🌟 特色功能

1. **零干扰训练**：只识别你训练的类别
2. **模型管理**：可切换使用不同训练的模型
3. **实时相机**：支持实时拍照识别
4. **进度可视化**：训练进度实时显示
5. **扫描动画**：识别时的酷炫扫描效果
6. **一键启动**：桌面快捷方式，方便快速演示

---

**享受使用 AI Vision Lab！🚀**
